# Springboot +MP 课程项目                         覃老师        班级：20204122





# 科技学院校园系统

技术要求：springboot + mybatis plus 版

项目演示：



### 功能介绍：

![项目功能介绍](.\img\项目功能介绍.png)



### 项目搭建：

创建数据库：

①建立数据库

![image-20230303150514453](.\img\image-20230303150514453.png)

②导入下面复制下面SQL到数据库中执行。

```sql
/*
 Navicat Premium Data Transfer

 Source Server         : localhost
 Source Server Type    : MySQL
 Source Server Version : 80018
 Source Host           : localhost:3306
 Source Schema         : zhxy_db

 Target Server Type    : MySQL
 Target Server Version : 80018
 File Encoding         : 65001

 Date: 19/04/2022 12:03:05
*/

SET NAMES utf8mb4;
SET FOREIGN_KEY_CHECKS = 0;

-- ----------------------------
-- Table structure for tb_admin
-- ----------------------------
DROP TABLE IF EXISTS `tb_admin`;
CREATE TABLE `tb_admin`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(15) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `gender` char(1) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `password` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `email` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `telephone` varchar(12) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `address` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `portrait_path` varchar(200) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 157 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = DYNAMIC;

-- ----------------------------
-- Records of tb_admin
-- ----------------------------
INSERT INTO `tb_admin` VALUES (101, 'admin', '男', '21232f297a57a5a743894a0e4a801fc3', '111111@qq.com', '13866666666', '宜昌', 'upload/default.jpg');
INSERT INTO `tb_admin` VALUES (102, 'admin1', '男', '21232f297a57a5a743894a0e4a801fc3', '333333@qq.com', '13866666666', '武汉', 'upload/default.jpg');
INSERT INTO `tb_admin` VALUES (103, 'admin2', '男', '21232f297a57a5a743894a0e4a801fc3', '333333@qq.com', '13866666666', '北京', 'upload/default.jpg');
INSERT INTO `tb_admin` VALUES (104, 'admin3', '男', '21232f297a57a5a743894a0e4a801fc3', '333333@qq.com', '13866666666', '上海', 'upload/default.jpg');

-- ----------------------------
-- Table structure for tb_clazz
-- ----------------------------
DROP TABLE IF EXISTS `tb_clazz`;
CREATE TABLE `tb_clazz`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(15) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `number` int(3) NULL DEFAULT NULL,
  `introducation` varchar(200) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `headmaster` varchar(15) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `email` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `telephone` varchar(12) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `grade_name` varchar(15) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 10 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = DYNAMIC;

-- ----------------------------
-- Records of tb_clazz
-- ----------------------------
INSERT INTO `tb_clazz` VALUES (1, '一年一班', 30, '大圣的一年一班好', '大圣', 'dasheng@163.com', '13866666666', '一年级');
INSERT INTO `tb_clazz` VALUES (2, '一年二班', 28, '小张的一年二班好', '小张', 'xiaozhang@163.com', '13866666666', '一年级');
INSERT INTO `tb_clazz` VALUES (3, '二年一班', 35, '小韩的二年一班好', '小韩', 'xiaohan@163.com', '13866666666', '二年级');
INSERT INTO `tb_clazz` VALUES (4, '二年二班', 30, '小强的二年二班好', '小强', 'xiaoqiang@163.com', '13866666666', '二年级');
INSERT INTO `tb_clazz` VALUES (5, '三年一班', 30, '小花的三年一班好', '小花', 'xiaohua@163.com', '13866666666', '三年级');
INSERT INTO `tb_clazz` VALUES (6, '三年二班', 30, '小赵的三年二班好', '小赵', 'xiaozhao@163.com', '13866666666', '三年级');
INSERT INTO `tb_clazz` VALUES (7, '四年一班', 30, '小赵的三年二班好', '小飞', 'xiaofei@163.com', '13866666666', '四年级');

-- ----------------------------
-- Table structure for tb_grade
-- ----------------------------
DROP TABLE IF EXISTS `tb_grade`;
CREATE TABLE `tb_grade`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `name` varchar(15) CHARACTER SET utf8 COLLATE utf8_general_ci NOT NULL DEFAULT '',
  `manager` varchar(15) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `email` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `telephone` varchar(12) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `introducation` varchar(200) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  PRIMARY KEY (`id`, `name`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 12 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = DYNAMIC;

-- ----------------------------
-- Records of tb_grade
-- ----------------------------
INSERT INTO `tb_grade` VALUES (1, '一年级', '大圣', 'dasheng@163.com', '13866666666', '大学一年级');
INSERT INTO `tb_grade` VALUES (2, '二年级', '小魏', 'xiaowei@163.com', '13866666666', '大学二年级');
INSERT INTO `tb_grade` VALUES (3, '三年级', '小李', 'xiaoli@163.com', '13666666666', '三年级,这个班级的孩子们很有才艺');
INSERT INTO `tb_grade` VALUES (4, '五年级', '小丽', 'li@123.com', '13666666666', '这个年级的同学多才多活力');
INSERT INTO `tb_grade` VALUES (5, '六年级', '小明', 'xiaoming@666.com', '13666666666', '这个年级的主任是小明');

-- ----------------------------
-- Table structure for tb_student
-- ----------------------------
DROP TABLE IF EXISTS `tb_student`;
CREATE TABLE `tb_student`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `sno` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `name` varchar(15) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `gender` char(1) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `password` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `email` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `telephone` varchar(12) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `address` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `introducation` varchar(200) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `portrait_path` varchar(200) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `clazz_name` varchar(15) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 10 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = DYNAMIC;

-- ----------------------------
-- Records of tb_student
-- ----------------------------
INSERT INTO `tb_student` VALUES (1, '1001', '张小明', '男', 'e10adc3949ba59abbe56e057f20f883e', 'yinyufei@163.com', '13866666666', '湖北宜昌', '这个学生学习好', 'upload/default.jpg', '一年一班');
INSERT INTO `tb_student` VALUES (2, '1002', '郭建超', '男', 'e10adc3949ba59abbe56e057f20f883e', 'guojianchao@163.com', '13866666666', '湖北宜昌', '这个学生会功夫', 'upload/default.jpg', '一年一班');
INSERT INTO `tb_student` VALUES (3, '1003', '史汶鑫', '男', 'e10adc3949ba59abbe56e057f20f883e', 'shiwenxin@163.com', '13866666666', '湖北宜昌', '这个学生酒量好', 'upload/default.jpg', '二年一班');
INSERT INTO `tb_student` VALUES (4, '1004', '高建军', '男', 'e10adc3949ba59abbe56e057f20f883e', 'gaojianjun@163.com', '13866666666', '湖北宜昌', '这个学生会做饭', 'upload/default.jpg', '二年一班');
INSERT INTO `tb_student` VALUES (5, '1005', '邹伟斌', '男', 'e10adc3949ba59abbe56e057f20f883e', 'zouweibin@163.com', '13866666666', '湖北宜昌', '这个学生能吃辣', 'upload/default.jpg', '三年一班');
INSERT INTO `tb_student` VALUES (6, '1006', '刘路', '男', 'e10adc3949ba59abbe56e057f20f883e', 'liulu@163.com', '13866666666', '湖北宜昌', '这个学生是学霸', 'upload/default.jpg', '三年二班');
INSERT INTO `tb_student` VALUES (7, '1007', '庞家仨', '女', 'e10adc3949ba59abbe56e057f20f883e', 'pangjiasan@163.com', '13866666666', '湖北宜昌', '这个学生海拔高', 'upload/default.jpg', '三年二班');
INSERT INTO `tb_student` VALUES (8, '1008', '谭帅333', '男', 'e10adc3949ba59abbe56e057f20f883e', 'tanshuai@163.com', '13866666666', '湖北宜昌', '这个学生想考研', 'upload/default.jpg', '四年一班');

-- ----------------------------
-- Table structure for tb_teacher
-- ----------------------------
DROP TABLE IF EXISTS `tb_teacher`;
CREATE TABLE `tb_teacher`  (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `tno` varchar(20) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `name` varchar(15) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `gender` char(1) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `password` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `email` varchar(50) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `telephone` varchar(12) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `address` varchar(100) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `portrait_path` varchar(200) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  `clazz_name` varchar(15) CHARACTER SET utf8 COLLATE utf8_general_ci NULL DEFAULT NULL,
  PRIMARY KEY (`id`) USING BTREE
) ENGINE = InnoDB AUTO_INCREMENT = 9 CHARACTER SET = utf8 COLLATE = utf8_general_ci ROW_FORMAT = DYNAMIC;

-- ----------------------------
-- Records of tb_teacher
-- ----------------------------
INSERT INTO `tb_teacher` VALUES (1, '101', '大圣', '女', 'e10adc3949ba59abbe56e057f20f883e', 'dasheng@163.com', '13866666666', '湖北宜昌', 'upload/default.jpg', '一年一班');
INSERT INTO `tb_teacher` VALUES (2, '102', '小张', '男', 'e10adc3949ba59abbe56e057f20f883e', 'xiaozhang@163.com', '13866666666', '湖北宜昌', 'upload/default.jpg', '一年二班');
INSERT INTO `tb_teacher` VALUES (3, '103', '小韩', '男', 'e10adc3949ba59abbe56e057f20f883e', 'xiaohan@163.com', '13866666666', '湖北宜昌', 'upload/default.jpg', '二年一班');
INSERT INTO `tb_teacher` VALUES (4, '104', '小强', '男', 'e10adc3949ba59abbe56e057f20f883e', 'xiaoqiang@163.com', '13866666666', '湖北宜昌', 'upload/default.jpg', '二年二班');
INSERT INTO `tb_teacher` VALUES (5, '105', '小花', '男', 'e10adc3949ba59abbe56e057f20f883e', 'xiaohua@163.com', '13866666666', '湖北宜昌', 'upload/default.jpg', '三年一班');
INSERT INTO `tb_teacher` VALUES (6, '106', '小赵', '男', 'e10adc3949ba59abbe56e057f20f883e', 'xiaozhao@163.com', '13866666666', '湖北宜昌', 'upload/default.jpg', '三年二班');
INSERT INTO `tb_teacher` VALUES (7, '107', '小飞', '男', 'e10adc3949ba59abbe56e057f20f883e', 'xiaofei@163.com', '13866666666', '湖北宜昌', 'upload/default.jpg', '四年一班');
INSERT INTO `tb_teacher` VALUES (8, '108', '秀秀2', '男', 'e10adc3949ba59abbe56e057f20f883e', '123456@123.com', '13855555555', '宜昌', 'upload/2977694e8da847e2a3e6f0af9416fbba.png', '一年二班');

SET FOREIGN_KEY_CHECKS = 1;

```

**mp-boot03项目不用动，后续带学生开发。**

### 创建新项目：

①第一步创建springboot项目

![image-20230303204118487](.\img\image-20230303204118487.png)

默认创建就可以了。

②添加Maven依赖

```xml
<?xml version="1.0" encoding="UTF-8"?>
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd">
    <modelVersion>4.0.0</modelVersion>
    <parent>
        <groupId>org.springframework.boot</groupId>
        <artifactId>spring-boot-starter-parent</artifactId>
        <version>2.7.9</version>
        <relativePath/> <!-- lookup parent from repository -->
    </parent>
    <groupId>com.example</groupId>
    <artifactId>school-boot</artifactId>
    <version>0.0.1-SNAPSHOT</version>
    <name>school-boot</name>
    <description>school-boot</description>

    <properties>
        <java.version>1.8</java.version>
    </properties>

    <dependencies>
        <!--springboot web依赖-->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-web</artifactId>
        </dependency>
       <!-- mysql依赖-->
        <dependency>
            <groupId>com.mysql</groupId>
            <artifactId>mysql-connector-j</artifactId>
            <scope>runtime</scope>
        </dependency>
       <!-- lombok依赖-->
        <dependency>
            <groupId>org.projectlombok</groupId>
            <artifactId>lombok</artifactId>
            <optional>true</optional>
        </dependency>
        <!--mybatis-plus-->
        <dependency>
            <groupId>com.baomidou</groupId>
            <artifactId>mybatis-plus-boot-starter</artifactId>
            <version>3.5.1</version>
        </dependency>
          <!-- thymeleaf支持-->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-thymeleaf</artifactId>
        </dependency>
        
        <!--开发工具-->
        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-devtools</artifactId>
            <optional>true</optional>
        </dependency>
       <!-- JSON处理-->
        <dependency>
            <groupId>com.alibaba</groupId>
            <artifactId>fastjson</artifactId>
            <version>1.2.29</version>
        </dependency>

        <!--knife4j 配置接口文档依赖-->
        <dependency>
            <groupId>com.github.xiaoymin</groupId>
            <artifactId>knife4j-spring-boot-starter</artifactId>
            <version>2.0.7</version>
        </dependency>

        <!-- JWT生成Token-->
        <dependency>
            <groupId>io.jsonwebtoken</groupId>
            <artifactId>jjwt</artifactId>
            <version>0.7.0</version>
        </dependency>
        <!--文件上传-->
        <dependency>
            <groupId>commons-fileupload</groupId>
            <artifactId>commons-fileupload</artifactId>
            <version>1.4</version>
        </dependency>

        <dependency>
            <groupId>org.springframework.boot</groupId>
            <artifactId>spring-boot-starter-test</artifactId>
            <scope>test</scope>
        </dependency>
    </dependencies>

    <build>
        <plugins>
            <plugin>
                <groupId>org.apache.maven.plugins</groupId>
                <artifactId>maven-compiler-plugin</artifactId>
                <version>3.8.1</version>
                <configuration>
                    <source>1.8</source>
                    <target>1.8</target>
                    <encoding>UTF-8</encoding>
                </configuration>
            </plugin>
            <plugin>
                <groupId>org.springframework.boot</groupId>
                <artifactId>spring-boot-maven-plugin</artifactId>
            </plugin>
        </plugins>
    </build>

</project>


```

③创建项目包

![image-20230303210335042](.\img\image-20230303210335042.png)

**④修改配置文件application.properties 修改为application.yml** 配置如下：

```yml
server:
  port: 10086
spring:
  #解决SpringBoot2.6.0以上版本与swagger冲突问题【原因是在springboot2.6.0以上版本中将SpringMVC 默认路径匹配策略从AntPathMatcher 更改为PathPatternParser，导致出错，解决办法是切换回原先的AntPathMatcher】
  mvc:
    pathmatch:
      matching-strategy: ant_path_matcher
  #配置数据源
  datasource:
    #配置数据源类型
    type: com.zaxxer.hikari.HikariDataSource
    #配置数据库连接属性
    driver-class-name: com.mysql.cj.jdbc.Driver
    url: jdbc:mysql://localhost:3306/asanxian?characterEncoding=utf-8&serverTimezone=GMT%2B8&userSSL=false
    username: root
    password: mysqlroot

    hikari:
      connection-test-query: SELECT 1
      connection-timeout: 60000
      idle-timeout: 500000
      max-lifetime: 540000
      maximum-pool-size: 12
      minimum-idle: 10
      pool-name: GuliHikariPool
  thymeleaf:
    #模板的模式，支持 HTML, XML TEXT JAVASCRIPT
    mode: HTML5
    #编码 可不用配置
    encoding: UTF-8
    #开发配置为false,避免修改模板还要重启服务器
    cache: false
    #配置模板路径，默认是templates，可以不用配置
    prefix: classpath:/static/
  jackson:
    date-format: yyyy-MM-dd HH:mm:ss
    time-zone: GMT+8
  servlet:
    #设置文件上传上限
    multipart:
      max-file-size: 10MB
      max-request-size: 100MB
mybatis-plus:
  configuration:
    #添加日志支持
    log-impl: org.apache.ibatis.logging.stdout.StdOutImpl
  mapper-locations: classpath*:/mapper/**/*.xml

```

⑤在resources下面添加mapper目录

![image-20230303213050979](.\img\image-20230303213050979.png)

⑥启动项目看看有没有配置出错。

![image-20230303211749524](.\img\image-20230303211749524.png)

上述项目搭建成功，进行下面开发。

### 工具类导入

**①将下面类复制到tools包中**



![image-20230303213435731](.\img\image-20230303213435731.png)



**②mybatis plus分页插件配置**

在config包中创建MyBatisConfig类

```java

import com.baomidou.mybatisplus.annotation.DbType;
import com.baomidou.mybatisplus.extension.plugins.MybatisPlusInterceptor;
import com.baomidou.mybatisplus.extension.plugins.inner.OptimisticLockerInnerInterceptor;
import com.baomidou.mybatisplus.extension.plugins.inner.PaginationInnerInterceptor;
import org.mybatis.spring.annotation.MapperScan;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;

/**
 * niu-core
 * MyBatisConfig 配置类
 *
 * @author : axian
 * @date : 2022-05-10 15:57
 **/

@Configuration
@MapperScan("com.schoolboot.mapper")
public class MyBatisConfig {
    @Bean
    public MybatisPlusInterceptor mybatisPlusInterceptor() {
        MybatisPlusInterceptor interceptor = new MybatisPlusInterceptor();
        interceptor.addInnerInterceptor(new PaginationInnerInterceptor(DbType.MYSQL));
        interceptor.addInnerInterceptor(new OptimisticLockerInnerInterceptor());
        return interceptor;
    }
}

```

**③mybatis plus 自动时间填充配置**

在config包中创建MyMetaObjectHandler类

```java
import com.baomidou.mybatisplus.core.handlers.MetaObjectHandler;
import org.apache.ibatis.reflection.MetaObject;

import java.time.LocalDateTime;



/**
 * cow-core
 * 全局时间处理
 *
 * @author : axian
 * @date : 2022-05-26 20:29
 **/
public class MyMetaObjectHandler implements MetaObjectHandler {

    @Override
    public void insertFill(MetaObject metaObject) {
        this.strictInsertFill(metaObject, "createTime", LocalDateTime.class, LocalDateTime.now());
    }

    @Override
    public void updateFill(MetaObject metaObject) {
        this.strictUpdateFill(metaObject, "updateTime", LocalDateTime.class, LocalDateTime.now());
    }
}
```

**swagger2 配置**

在config包中创建V2Config类

```java

import org.springframework.boot.context.properties.ConfigurationProperties;
import org.springframework.stereotype.Component;

/**
 * niu-core
 * 配置信息
 *
 * @author : axian
 * @date : 2022-05-10 16:29
 **/
@Component
@ConfigurationProperties(prefix = "fuce")
public class V2Config {
    /**
     * 项目名称
     */
    private String name;
    /**
     * 版本
     */
    private String version;
    /**
     * 版权年份
     */
    private String copyrightYear;
    /**
     * 邮箱发送smtp
     */
    private String emailSmtp;
    /**
     * 发送邮箱端口
     */
    private String emailPort;
    /**
     * 发送邮箱登录账号
     */
    private String emailAccount;
    /**
     * 发送邮箱登录密码
     */
    private String emailPassword;
    /**
     * 演示模式
     **/
    private String demoEnabled;
    /**
     * 滚动验证码
     **/
    private Boolean rollVerification;
    /**
     * 文件路径
     **/
    private String profile;

    public String getName() {
        return name;
    }

    public void setName(String name) {
        this.name = name;
    }

    public String getVersion() {
        return version;
    }

    public void setVersion(String version) {
        this.version = version;
    }

    public String getCopyrightYear() {
        return copyrightYear;
    }

    public void setCopyrightYear(String copyrightYear) {
        this.copyrightYear = copyrightYear;
    }

    public String getEmailSmtp() {
        return emailSmtp;
    }

    public void setEmailSmtp(String emailSmtp) {
        this.emailSmtp = emailSmtp;
    }

    public String getEmailPort() {
        return emailPort;
    }

    public void setEmailPort(String emailPort) {
        this.emailPort = emailPort;
    }

    public String getEmailAccount() {
        return emailAccount;
    }

    public void setEmailAccount(String emailAccount) {
        this.emailAccount = emailAccount;
    }

    public String getEmailPassword() {
        return emailPassword;
    }

    public void setEmailPassword(String emailPassword) {
        this.emailPassword = emailPassword;
    }

    public String getDemoEnabled() {
        return demoEnabled;
    }

    public void setDemoEnabled(String demoEnabled) {
        this.demoEnabled = demoEnabled;
    }

    public Boolean getRollVerification() {
        return rollVerification;
    }

    public void setRollVerification(Boolean rollVerification) {
        this.rollVerification = rollVerification;
    }

    public String getProfile() {
        return profile;
    }

    public void setProfile(String profile) {
        this.profile = profile;
    }

    /**
     * 获取头像上传路径
     */
    public String getAvatarPath() {
        return this.profile + "/avatar";
    }

    /**
     * 获取下载路径
     */
    public String getDownloadPath() {
        return this.profile + "/download/";
    }

    /**
     * 获取上传路径
     */
    public String getUploadPath() {
        return this.profile + "/upload";
    }
}

```

在config包中创建Knife4jConfiguration类

```java
package com.schoolboot.config;




import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.context.annotation.Bean;
import org.springframework.context.annotation.Configuration;
import springfox.documentation.builders.ApiInfoBuilder;
import springfox.documentation.builders.PathSelectors;
import springfox.documentation.builders.RequestHandlerSelectors;
import springfox.documentation.service.Contact;
import springfox.documentation.spi.DocumentationType;
import springfox.documentation.spring.web.plugins.Docket;
import springfox.documentation.swagger2.annotations.EnableSwagger2WebMvc;

/**
 * niu-core
 * 配置接口文档
 *
 * @author : axian
 * @date : 2022-05-10 16:27
 **/
@Configuration
@EnableSwagger2WebMvc
public class Knife4jConfiguration {
    @Autowired
    private V2Config v2Config;

    @Bean(value = "defaultApi2")
    public Docket defaultApi2() {
        Contact contact = new Contact("贤哥编程", "www.xxxx.com", "342926969@qq.com");
        Docket docket = new Docket(DocumentationType.SWAGGER_2)
                .apiInfo(new ApiInfoBuilder()
                        .title("科技学院校园系统")
                        .description("科技学院校园系统项目前端接口文档")
                        //服务条款Url
                        .termsOfServiceUrl("www.xxxx111.com")
                        .contact(contact)
                        .version(v2Config.getVersion())
                        .build())
                //分组名称
                .groupName("f2")
                .select()
                //这里指定Controller扫描包路径
                .apis(RequestHandlerSelectors.basePackage("com.schoolboot.controller"))
                .paths(PathSelectors.any())
                .build();
        return docket;
    }

}

```

**重新启动服务器**

请求访问http://127.0.0.1:10086/doc.html

![image-20230303220204835](.\img\image-20230303220204835.png)

### 前端搭建：

将前端项目复制到static目录

![image-20230304083648380](.\img\image-20230304083648380.png)

### 编写后端程序开始

①创建domain下面实体类

Admin

```java
package com.schoolboot.domain;

import com.baomidou.mybatisplus.annotation.TableName;
import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

/**
 * ClassName:Admin
 * Package:com.schoolboot.domain
 * Description:
 *
 * @Author: 贤哥编程
 * @Create: 2023-3-4 - 8:38
 */
@Data
@NoArgsConstructor
@AllArgsConstructor
@TableName(value = "tb_admin")
public class Admin {
    @TableId(value = "id",type= IdType.AUTO)
    private Integer id;
    private String  name;
    private Character gender;
    private String password;
    private String email;
    private String telephone;
    private String  address;
    private String portraitPath;

}

```

Clazz

```java
package com.schoolboot.domain;

import com.baomidou.mybatisplus.annotation.TableName;
import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

/**
 * ClassName:Clazz
 * Package:com.schoolboot.domain
 * Description:
 *
 * @Author: 贤哥编程
 * @Create: 2023-3-4 - 8:44
 */
@Data
@NoArgsConstructor
@AllArgsConstructor
@TableName(value = "tb_clazz")
public class Clazz {
    @TableId(value = "id",type= IdType.AUTO)
    private Integer id;
    private String  name;
    private Integer number;
    private String  introducation;
    private String headmaster;
    private String  email;
    private String telephone;
    private String gradeName;

}

```

Grade

```java
package com.schoolboot.domain;

import com.baomidou.mybatisplus.annotation.TableName;
import io.swagger.models.auth.In;
import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

/**
 * ClassName:Grade
 * Package:com.schoolboot.domain
 * Description:
 *
 * @Author: 贤哥编程
 * @Create: 2023-3-4 - 8:47
 */
@Data
@NoArgsConstructor
@AllArgsConstructor
@TableName(value = "tb_grade")
public class Grade {
    @TableId(value = "id",type= IdType.AUTO)
    private Integer id;
    private String name;
    private String manager;
    private String email;
    private String telephone;
    private String  introducation;

}

```

Student

```java
package com.schoolboot.domain;

import com.baomidou.mybatisplus.annotation.TableName;
import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

/**
 * ClassName:Student
 * Package:com.schoolboot.domain
 * Description:
 *
 * @Author: 贤哥编程
 * @Create: 2023-3-4 - 8:50
 */
@Data
@NoArgsConstructor
@AllArgsConstructor
@TableName(value = "tb_student")
public class Student {
	@TableId(value = "id",type= IdType.AUTO)
    private Integer  id;
    private String  sno;
    private String name;
    private Character gender;
    private String password;
    private String email;
    private String telephone;
    private String address;
    private String introducation;
    private String portraitPath;
    private String clazzName;

}

```

Teacher

```java
package com.schoolboot.domain;

import com.baomidou.mybatisplus.annotation.TableName;
import lombok.AllArgsConstructor;
import lombok.Data;
import lombok.NoArgsConstructor;

/**
 * ClassName:Teacher
 * Package:com.schoolboot.domain
 * Description:
 *
 * @Author: 贤哥编程
 * @Create: 2023-3-4 - 8:53
 */
@Data
@NoArgsConstructor
@AllArgsConstructor
@TableName(value = "tb_teacher")
public class Teacher {
    @TableId(value = "id",type= IdType.AUTO)
    private Integer  id;
    private String  tno;
    private String name;
    private Character gender;
    private String password;
    private String  email;
    private String telephone;
    private String  address;
    private String portrait_path;
    private String   clazz_name;

}

```

**②创建Mapper开发需要继承BaseMapper和绑定对应的实体。**



![image-20230304092114712](.\img\image-20230304092114712.png)

**③Service接口开发需要继承IService和绑定对应的实体**

![image-20230304092454526](.\img\image-20230304092454526.png)

**④Serive实现类开发**

**一、需要继承ServiceImpl 传递对应的Mapper,Entity 实现IService接口。**

二、需要在serviceImpl上添加注解 

```java
@Service
@Transactional
```

![image-20230304093014183](.\img\image-20230304093014183.png)

### 登录功能实现

**第一步需要从后台获取验证码图片。**

```java
@Api(tags = "系统控制器")
@RestController
@RequestMapping("/sms/system")
public class SysController {
     @ApiOperation("获取验证码图片")
    @GetMapping("/getVerifiCodeImage")
    public void getVerifiCodeImage(HttpServletRequest request, HttpServletResponse response){
        // 获取图片
        BufferedImage verifiCodeImage = CreateVerifiCodeImage.getVerifiCodeImage();
        // 获取图片上的验证码
        String verifiCode =new String( CreateVerifiCodeImage.getVerifiCode());
        // 将验证码文本放入session域,为下一次验证做准备
        HttpSession session = request.getSession();
        session.setAttribute("verifiCode",verifiCode);
        // 将验证码图片响应给浏览器

        try {
            ImageIO.write(verifiCodeImage,"JPEG",response.getOutputStream());
        } catch (IOException e) {
            e.printStackTrace();
        }

    }
}
```

![image-20230304101736868](.\img\image-20230304101736868.png)

**第二步用户登录实现：**

①判断用户输入的验证和session中保存的验证码是否一致。

②用户输入的用户名和密码在数据库中是否存在。

```java

    @Resource
    private AdminService adminService;
    @Resource
    private StudentService studentService;
    @Resource
    private TeacherService teacherService;


    @ApiOperation("向后端发送登录请求")
    @PostMapping("/login")
    public Result postLogin(
            @ApiParam("登录提交信息的form表单为JSON")
            @RequestBody UsersType usersType,
            HttpServletRequest request
            ){
        //获得Session
        HttpSession session = request.getSession();
        //从session对象中取出验证码
        String sessionCode = (String)session.getAttribute("verifiCode");
        //从前端用户提交取到验证码
        String loginCode = usersType.getVerifiCode();
        //判断验证码是否有效
        if("".equals(sessionCode) || null == sessionCode){
            return Result.fail().message("验证码失效，");
        }
        //判断用户输入的验证码和session中验证码不一致
        if(!loginCode.equalsIgnoreCase(sessionCode)){
            return Result.fail().message("验证码输入错误，请重新输入验证码");
        }
        //上述程序没有进if中说明验证输入正确，需要将session中验证码删除。
        session.removeAttribute("verifiCode");

        Map<String,Object> map = new HashMap<>();

        switch (usersType.getUserType().intValue()){
            case 1:
               Admin admin =  adminService.login(usersType);
               if(admin == null){
                   return Result.fail().message("用户输入有误！");
               }else{
                   map.put("token", JwtHelper.createToken(admin.getId().longValue(),1));
               }
               return Result.ok(map);

            case 2:
                Student student = studentService.login(usersType);
                if(student == null){
                    return Result.fail().message("用户输入有误！");
                }else {
                    map.put("token", JwtHelper.createToken(student.getId().longValue(),2));
                }
                return Result.ok(map);
            case 3:
                Teacher teacher = teacherService.login(usersType);
                if(teacher == null){
                    return Result.fail().message("用户输入有误！");
                }else {
                    map.put("token", JwtHelper.createToken(teacher.getId().longValue(),3));
                }
                return Result.ok(map);

        }

        return Result.fail().message("没有查到用户");
    }
```

**第三步获得用户信息跳转界面**

```java
 @ApiOperation("获取用户登录信息")
    @GetMapping("/getInfo")
    public Result getInfo(
            @ApiParam("通过token获得用户")
            @RequestHeader("token") String token
    ){
        boolean expiration = JwtHelper.isExpiration(token);
        if(expiration){
            return Result.fail().message("你的token过期，从新请求token");
        }
        //解析得到用户Id
        int userId = JwtHelper.getUserId(token).intValue();
        //解析到用户类型
        int userType = JwtHelper.getUserType(token).intValue();
        Map<String,Object> map = new HashMap<>();
        switch (userType){
            case 1:
                Admin admin = adminService.getById(userId);
                map.put("userType",userType);
                map.put("user",admin);
                break;
            case 2:
                Student student = studentService.getById(userId);
                map.put("userType",userType);
                map.put("user",student);
                break;
            case 3:
                Teacher teacher = teacherService.getById(userId);
                map.put("userType",userType);
                map.put("user",teacher);
                break;
        }


        return Result.ok(map);
    }

```

### 开发年级CRUD

①查询年级带条件和分页

controller层

```java
package com.schoolboot.controller;

import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;
import com.baomidou.mybatisplus.core.metadata.IPage;
import com.baomidou.mybatisplus.extension.plugins.pagination.Page;
import com.schoolboot.domain.Grade;
import com.schoolboot.service.GradeService;
import com.schoolboot.tools.Result;
import io.swagger.annotations.ApiParam;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import javax.annotation.Resource;

/**
 * ClassName:GradeController
 * Package:com.schoolboot.controller
 * Description:
 *
 * @Author: 贤哥编程
 * @Create: 2023-3-4 - 17:07
 */
@RestController
@RequestMapping("sms/gradeController")
public class GradeController {
    @Resource
    private GradeService gradeService;
    //查询年级带条件和分页
    @GetMapping("/getGrades/{pageNo}/{pageSize}")
    public Result getGrades(
            @ApiParam("分页查询的页码数") @PathVariable("pageNo") Integer pageNo,
            @ApiParam("分页查询的页大小") @PathVariable("pageSize") Integer pageSize,
            @ApiParam("分页查询模糊匹配的名称") String gradeName
    ){
        Page page = new Page<>(pageNo,pageSize);
        IPage<Grade> pages = gradeService.getPageGrades(page,gradeName);

        return Result.ok(pages);
    }

}

```

service层

```java
package com.schoolboot.service.impl;

import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;
import com.baomidou.mybatisplus.core.metadata.IPage;
import com.baomidou.mybatisplus.core.toolkit.StringUtils;
import com.baomidou.mybatisplus.extension.plugins.pagination.Page;
import com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;
import com.schoolboot.domain.Grade;
import com.schoolboot.mapper.GradeMapper;
import com.schoolboot.service.GradeService;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;


/**
 * ClassName:GradeServiceImpl
 * Package:com.schoolboot.service.impl
 * Description:
 *
 * @Author: 贤哥编程
 * @Create: 2023-3-4 - 9:11
 */
@Service
@Transactional
public class GradeServiceImpl extends ServiceImpl<GradeMapper, Grade> implements GradeService {
    @Override
    public IPage<Grade> getPageGrades(Page page, String gradeName) {
        QueryWrapper<Grade> queryWrapper  = new QueryWrapper<>();
        if(StringUtils.checkValNotNull(gradeName)){
            queryWrapper.like("name",gradeName);
        }
        queryWrapper.orderByDesc("id");
        Page p = baseMapper.selectPage(page, queryWrapper);
        return p;
    }
}

```

②添加和修改年级信息

```java
 //添加和修改年级数据
    @ApiOperation("新增或修改grade,有id属性是修改,没有则是增加")
    @PostMapping("/saveOrUpdateGrade")
    public Result saveOrUpdateGrade(
            @ApiParam("JSON的Grade对象")@RequestBody Grade grade
    ){
        // 接收参数
        // 调用服务层方法完成增减或者修改
        gradeService.saveOrUpdate(grade);
        return Result.ok();
    }
```

③删除年级信息

```java
 @ApiOperation("删除Grade信息")
    @DeleteMapping("/deleteGrade")
    public Result deleteGrade(
            @ApiParam("要删除的所有的grade的id的JSON集合") @RequestBody List<Integer> ids){

        boolean remove = gradeService.removeByIds(ids);
        if(remove){
           return Result.ok().message("删除成功");
        }
        return Result.fail().message("删除失败");
    }
```

### 开发班级CRUD

显示班级相关数据。

①首先需要查询出年级

在GradeController 中查询年级如下：

```java
 @ApiOperation("查询所有年级")
    @GetMapping("/getGrades")
    public Result getGrades(){
        List<Grade> list = gradeService.list();

        if(list == null){
            return Result.fail().message("未查到数据");
        }
        return Result.ok(list);
    }
```

②班级查询带分页和条件

在ClazzController中查询班级处理。

```java
package com.schoolboot.controller;

import com.baomidou.mybatisplus.core.metadata.IPage;
import com.baomidou.mybatisplus.extension.plugins.pagination.Page;
import com.schoolboot.domain.Clazz;
import com.schoolboot.service.ClazzService;
import com.schoolboot.service.GradeService;
import com.schoolboot.tools.Result;
import io.swagger.annotations.Api;
import io.swagger.annotations.ApiOperation;
import io.swagger.annotations.ApiParam;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import javax.annotation.Resource;
import java.util.List;

/**
 * ClassName:ClazzController
 * Package:com.schoolboot.controller
 * Description:
 *
 * @Author: 贤哥编程
 * @Create: 2023-3-4 - 21:50
 */
@Api(tags = "班级管理器")
@RestController
@RequestMapping("/sms/clazzController")
public class ClazzController {
    @Resource
    private ClazzService clazzService;


   @ApiOperation("查询所有班级信息")
    @GetMapping("/getClazzsByOpr/{pageNo}/{pageSize}")
    public Result getClazzs(
           @ApiParam("分页查询的页码数") @PathVariable("pageNo") Integer pageNo,
           @ApiParam("分页查询页大小")@PathVariable("pageSize") Integer pageSize,
           @ApiParam("分页查询的查询条件") Clazz clazz
   ){
       Page<Clazz> page = new Page<>(pageNo,pageSize);

       IPage<Clazz> iPage = clazzService.getClazzWhere(clazz,page);

       if(iPage == null){
           return Result.fail().message("未查到数据");
       }
       return Result.ok(iPage);
    }

}

```

在service实现类（ClazzserviceImpl）中实现如下：

```java
package com.schoolboot.service.impl;

import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;
import com.baomidou.mybatisplus.core.metadata.IPage;
import com.baomidou.mybatisplus.extension.plugins.pagination.Page;
import com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;
import com.schoolboot.domain.Clazz;
import com.schoolboot.mapper.ClazzMapper;
import com.schoolboot.service.ClazzService;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

/**
 * ClassName:ClazzServiceImpl
 * Package:com.schoolboot.service.impl
 * Description:
 *
 * @Author: 贤哥编程
 * @Create: 2023-3-4 - 9:09
 */
@Service
@Transactional
public class ClazzServiceImpl extends ServiceImpl<ClazzMapper, Clazz>implements ClazzService {
    @Override
    public IPage<Clazz> getClazzWhere(Clazz clazz, Page<Clazz> page) {

        QueryWrapper<Clazz> queryWrapper = new QueryWrapper<>();
        if(clazz.getGradeName() != null){
            queryWrapper.eq("grade_name",clazz.getGradeName());
        }
        if(clazz.getName() != null){
            queryWrapper.like("name",clazz.getName());
        }
            queryWrapper.orderByDesc("id");

         return baseMapper.selectPage(page, queryWrapper);


    }
}

```

③年级添加和修改

在ClazzController中处理添加修改。

```java
    @ApiOperation("增加或者修改班级信息")
    @PostMapping("/saveOrUpdateClazz")
    public Result saveOrUpdateClazz(
            @ApiParam("JSON格式的班级信息")@RequestBody Clazz clazz
    ){
        boolean saveOrUpdate = clazzService.saveOrUpdate(clazz);
        if (saveOrUpdate) {
            return Result.ok();
        }
        return Result.fail().message("添加或者修改失败");
    }
```

④年级删除和批量删除。

在ClazzController中处理删除和批量删除。

```java
    @ApiOperation("删除单个和多个班级")
    @DeleteMapping("/deleteClazz")
    public Result deleteClazz(
            @ApiParam("要删除的多个班级的ID的JSON数组")@RequestBody List<Integer> ids
    ){
        boolean removeByIds = clazzService.removeByIds(ids);
        if(removeByIds) {
            return Result.ok();
        }
        return Result.fail().message("删除失败");
    }
```

### 学生管理CRUD

①首先查询出班级信息。

在ClazzController中查询班级信息。

```java
   @ApiOperation("查询所有班级信息")
    @GetMapping("/getClazzs")
    public Result getClazzs(){
        List<Clazz> clazzes = clazzService.list();

        if(clazzes == null) {
            return Result.fail().message("没有查到数据");
        }
        return Result.ok(clazzes);
    }
```

②分页带条件查询出学生信息。

在StudentController中处理。

```java
package com.schoolboot.controller;

import com.baomidou.mybatisplus.core.metadata.IPage;
import com.baomidou.mybatisplus.extension.plugins.pagination.Page;
import com.schoolboot.domain.Student;
import com.schoolboot.service.StudentService;
import com.schoolboot.tools.Result;
import io.swagger.annotations.Api;
import io.swagger.annotations.ApiOperation;
import io.swagger.annotations.ApiParam;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.PathVariable;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RestController;

import javax.annotation.Resource;

/**
 * ClassName:StudentController
 * Package:com.schoolboot.controller
 * Description:
 *
 * @Author: 贤哥编程
 * @Create: 2023-3-4 - 22:43
 */
@Api(tags = "学生控制器")
@RestController
@RequestMapping("/sms/studentController")
public class StudentController {
    @Resource
    public StudentService studentService;

    @ApiOperation("分页带条件查询学生信息")
    @GetMapping("/getStudentByOpr/{pageNo}/{pageSize}")
    public Result getStudentBuOpr(
            @ApiParam("页码数") @PathVariable("pageNo") Integer pageNo,
            @ApiParam("页大小") @PathVariable("pageSize") Integer pageSize,
            @ApiParam("查询的条件") Student student
    ){
        //分页信息封装Page对象
        Page<Student> pageParam =new Page(pageNo,pageSize);
        // 进行查询
        IPage<Student> studentPage =studentService.getStudentWhere(pageParam,student);
        // 封装Result返回
        if(studentPage == null){
            return Result.fail().message("未查到数据");
        }
        return Result.ok(studentPage);
    }
}

```

在service实现类处理具体查询如下。

```java
package com.schoolboot.service.impl;

import com.baomidou.mybatisplus.core.conditions.query.QueryWrapper;
import com.baomidou.mybatisplus.core.metadata.IPage;
import com.baomidou.mybatisplus.extension.plugins.pagination.Page;
import com.baomidou.mybatisplus.extension.service.impl.ServiceImpl;
import com.schoolboot.domain.Student;
import com.schoolboot.domain.UsersType;
import com.schoolboot.mapper.StudentMapper;
import com.schoolboot.service.StudentService;
import com.schoolboot.tools.MD5;
import org.springframework.stereotype.Service;
import org.springframework.transaction.annotation.Transactional;

/**
 * ClassName:StudentServiceImpl
 * Package:com.schoolboot.service.impl
 * Description:
 *
 * @Author: 贤哥编程
 * @Create: 2023-3-4 - 9:14
 */
@Service
@Transactional
public class StudentServiceImpl extends ServiceImpl<StudentMapper, Student>implements StudentService {
    @Override
    public Student login(UsersType usersType) {
        QueryWrapper<Student> queryWrapper = new QueryWrapper<>();
        queryWrapper.eq("name",usersType.getUsername());
        queryWrapper.eq("password", MD5.encrypt(usersType.getPassword()));

        Student student = baseMapper.selectOne(queryWrapper);
        return student;
    }

    @Override
    public IPage<Student> getStudentWhere(Page<Student> pageParam, Student student) {
        QueryWrapper<Student> queryWrapper = new QueryWrapper<>();
        if(student.getName() != null){
            queryWrapper.like("name",student.getName());
        }
        queryWrapper.orderByDesc("id");
        return baseMapper.selectPage(pageParam,queryWrapper);
    }
}

```

③学生的添加和修改处理。

在StudentController中处理。

```java
 @ApiOperation("保存或者修改学生信息")
    @PostMapping("/addOrUpdateStudent")
    public Result addOrUpdateStudent(
            @ApiParam("要保存或修改的学生JSON")@RequestBody  Student student
    ){
        Integer id = student.getId();
        if (null == id || 0 ==id) {
            student.setPassword(MD5.encrypt(student.getPassword()));
        }
        boolean saveOrUpdate = studentService.saveOrUpdate(student);
        if(saveOrUpdate){
            return Result.ok();
        }
        return Result.fail().message("添加或者修改失败");
    }
```

④删除学生及批量删除学生。

```java
 @ApiOperation("删除单个或者多个学生信息")
    @DeleteMapping("/delStudentById")
    public Result delStudentById(
            @ApiParam("要删除的学生编号的JSON数组") @RequestBody List<Integer> ids
    ){
        boolean remove = studentService.removeByIds(ids);
        if(remove == false){
            return Result.fail().message("删除学生失败");
        }
        return Result.ok();
    }
```

### 教师管理CRUD

①在TeacherController 分页带条件查询教师信息

```java
@ApiOperation("分页获取教师信息,带搜索条件")
    @GetMapping("/getTeachers/{pageNo}/{pageSize}")
    public Result getTeachers(
            @ApiParam("页码数") @PathVariable("pageNo") Integer pageNo ,
            @ApiParam("页大小") @PathVariable("pageSize") Integer pageSize ,
            @ApiParam("查询条件") Teacher teacher
    ){
        Page<Teacher> paraParam =new Page<>(pageNo,pageSize);

        IPage<Teacher> page = teacherService.getTeachersWhere(paraParam,teacher);
        if(page == null){
            return Result.fail().message("未查询到数据");
        }
        return Result.ok(page);
    }
```

在TeacherServiceImpl 中具体实现如下：

```java
 @Override
    public IPage<Teacher> getTeachersWhere(Page<Teacher> paraParam, Teacher teacher) {

        QueryWrapper<Teacher> queryWrapper = new QueryWrapper<>();
        if(teacher.getName()!= null || teacher.getName() != null){
            queryWrapper.like("name",teacher.getName());
        }

        return baseMapper.selectPage(paraParam,queryWrapper);
    }
```

②添加修改处理操作。

```java
 @ApiOperation("保存或者修改学生信息")
    @PostMapping("/addOrUpdateStudent")
    public Result addOrUpdateStudent(
            @ApiParam("要保存或修改的学生JSON")@RequestBody  Student student
    ){
        Integer id = student.getId();
        //修改是有id,添加时没有id
        if (null == id || 0 ==id) {
            student.setPassword(MD5.encrypt(student.getPassword()));
        }
        studentService.saveOrUpdate(student);
        return Result.ok();
    }
```

③删除及批量删除处理操作。

```java
@ApiOperation("删除学生信息及批量删除")
    @DeleteMapping("/delStudentById")
    public Result delStudentById(
            @ApiParam("要删除的学生编号的JSON数组") @RequestBody List<Integer> ids
    ){
        boolean b = teacherService.removeBatchByIds(ids);

        if(b == false){
            return Result.fail().message("删除失败");
        }
        return Result.ok();
    }
```

### 头像上传处理

头像上传路径为： /sms/system/headerImgUpload

请求方式：POST

```java
 @ApiOperation("头像同意上传接口")
    @PostMapping("/headerImgUpload")
    public Result headerImgUpload(
            @ApiParam("头像文件")  @RequestParam("multipartFile") MultipartFile multipartFile,
            HttpServletRequest request
            )  {


        String uuid = UUID.randomUUID().toString().replace("-", "").toLowerCase();
        String originalFilename = multipartFile.getOriginalFilename();
        int i = originalFilename.lastIndexOf(".");
        String newFileName =uuid.concat(originalFilename.substring(i));

        // 保存文件 将文件发送到第三方/独立的图片服务器上,
        String portraitPath="D:/2022springcloudcode/school-boot/target/classes/public/upload/".concat(newFileName);
        try {
            multipartFile.transferTo(new File(portraitPath));
        } catch (IOException e) {
            e.printStackTrace();
        }

```

### 管理员CRUD

①分页带条件查询管理员

在AdminController 中编写如下：

```java
package com.schoolboot.controller;

import com.baomidou.mybatisplus.core.metadata.IPage;
import com.baomidou.mybatisplus.extension.plugins.pagination.Page;
import com.schoolboot.service.AdminService;
import com.schoolboot.tools.Result;
import io.swagger.annotations.Api;
import io.swagger.annotations.ApiOperation;
import io.swagger.annotations.ApiParam;
import org.springframework.web.bind.annotation.*;

import javax.annotation.Resource;

/**
 * ClassName:AdminController
 * Package:com.schoolboot.controller
 * Description:
 *
 * @Author: 贤哥编程
 * @Create: 2023-3-5 - 20:25
 */
@Api(tags = "管理员管理")
@RestController
@RequestMapping("/sms/adminController")
public class AdminController {
    @Resource
    private AdminService adminService;
    @ApiOperation("查询所有管理员")
    @GetMapping("/getAllAdmin/{pageNo}/{pageSize}")
    public Result getAllAdmin(
            @ApiParam("当前第几页") @PathVariable Integer pageNo,
            @ApiParam("每页显示多少条数据") @PathVariable Integer pageSize,
            @ApiParam("管理员名字") String adminName

    ){
        Page page = new Page<>(pageNo,pageSize);

       IPage iPage =  adminService.getAdminAllWhere(page,adminName);

       if(iPage == null){
           return Result.fail().message("未查到数据");
       }
       return Result.ok(iPage);
    }
}

```

在service的实现类中编写如下：

```java
 @Override
    public IPage getAdminAllWhere(Page page, String adminName) {
        QueryWrapper<Admin> queryWrapper = new QueryWrapper<>();

        if(StringUtils.checkValNotNull(adminName)){
            queryWrapper.like("name",adminName);
        }

        return baseMapper.selectPage(page,queryWrapper);
    }
```

②管理员添加和修改操作。

```java
  @ApiOperation("增加或修改管理员信息")
    @PostMapping("/saveOrUpdateAdmin")
    public Result  saveOrUpdateAdmin(
            @ApiParam("JSON格式的Admin对象") @RequestBody Admin admin
    ){
        Integer id = admin.getId();
        if (id==null || 0 ==id) {
            admin.setPassword(MD5.encrypt(admin.getPassword()));
        }
        adminService.saveOrUpdate(admin);
        return Result.ok();

    }
```

③管理员删除操作：

```java
@ApiOperation("删除单个或者多个管理员信息")
    @DeleteMapping("/deleteAdmin")
    public Result deleteAdmin(
            @ApiParam("要删除的管理员的多个ID的JSON集合") @RequestBody List<Integer> ids
    ){
        adminService.removeByIds(ids);
        return Result.ok();
    }
```





## 二 毕业设计编写

> 毕业设计包含的相关内容

1 论文名称

2 摘要

3 绪论

4 相关技术介绍

5 系统需求分析

6 系统概要设计

7 系统各功能模块的详细设计

8 系统实现中关键的问题和解决方案

9 系统测试及实现效果

10 总结与展望

11 参考文献

12 致谢





> 1 论文名称

1 名称不要太短

2 工程类项目且有成果展示可以叫 ***设计与实现

3 如果在理论上有一些建树,可以叫***理论研究

如:  智慧校园云端管理系统的设计和实现

> 2 摘要

1 项目的背景介绍,可以参考开题报告中,课题的目标和意义

2 毕业设计都做了那些工作

​		1 管理类知识和理论的学习,引入了互联网的管理思维

​		2 结合实际校园工作内容,设计了那些业务

​		3 具体功能模块有那些,实现了那些业务

3 本项目的开发和测试中遇见的难点,遇见的问题,以及解决方案

​       cookie session问题,登录的失效问题,用户权限问题,数据安全问题... ...

4 成果说明    目前项目取得那些成果,完成了那些功能的开发,实际使用的体验感等

5 关键词   校园管理  SpringBoot+VUE SpringBoot+MyBatisPlus  Swagger2 前后端分离

> 3 绪论(第一章)

1 论文设计的背景和意义   (管理相关的,互联网技术对于管理方式的革命性影响)

2 国内外现状和社会现状   (互联网技术在管理方面的应用已经渗入到各行各业,带来了效率的提高,教育行业也应该使用)

3 论文的主要内容介绍        本文主要进行了互联网时代校园管理的设计和实现. 由于.......... 因此..........  本文在深入分析Vue+SpringBoot+MyBatisPlus的技术前提下,提出了一套校园管理的软件系统并详细阐述了技术选型和实现过程. 需求如何分析的,数据库如何设计的,技术如何选型的,项目如何搭建的. 过程是如何开发的

4 论文的组织结构    

​      第一章    绪论      

​      第二章    技术选型   +配合内容介绍

​      第三章    系统需求分析

​      第四章   ... ...



> 4 核心组件技术介绍(第二章)

VUE技术介绍                   历史  背景  特点  优点  原理   

SSM技术介绍与分析

SpringBoot技术介绍

MyBatisPlus技术介绍

Swagger2技术介绍

MVC架构

前后端分离开发和部署模式

> 5 系统需求分析(第三章)

1 功能需求分析

​	2 数据库的设计

​	3 登录的控制

​	4 年级模块

​	5 班级模块

​	6 教师模块

​	7 学生模块

​	8 管理员模块

​	9 个人信息管理模块

​	10 权限的控制

2 非功能需求

   1 可靠性

   2 可扩展性

   3 易用性

   4 其他约束

> 6 软件安装和项目环境搭建(第四章)

1 系统环境的准备

2 软件的安装

3 项目的搭建

4 运行检测

> 7 系统各功能模块的实现(第五章)

验证码功能的实现

​       1  效果截图

​		2  业务分析   当加载登录页时,前端项目自动向后端请求一个验证码图片并展示在页面上,后端生成验证码后响应给前端,并将 验证码图片上的文本存储在session中,可以采用时序图,流程图等

​       3  接口介绍    

​						请求方式    GET

​						请求的URI  /sms/system/getVerifiCodeImage

​						请求的数据:  none

​						响应的数据: image/jpeg

​       4  核心代码实现

> 8 系统实现中关键的问题和解决方案(第六章)

问题1 前后端分离开发,接口文档和接口测试问题      解决方案是: swagger2

问题2 cookie和Session控制登录校验的有效期问题   解决方案是:token

问题3 管理员,教师,学生三个身份登录后权限不同     解决方案是:根据用户类型查询不同的表格,根据不同的类型展示不同的页面

问题4 数据安全问题																	解决方案是:MD5加密,密码的校验在密文状态下

... ...

> 9 系统测试及实现效果(第七章)

每个业务如何使用swagger2测试,在这里进行介绍

删除学生信息测试

​			请求的URI

​			请求的方式

​			请求要提交的数据

​          响应的数据

​           swagger2测试的结果效果截图		



> 10 总结与展望(第八章)

1 夸夸自己和导师   业务完整实现,技术选型新,开发过程流畅. 系统的可靠性,扩展性,易用性

2 展望未来   目前项目的设计还缺少具体的针对性,针对某个学校的业务工作流程继续细化,继续添加功能   打卡,考勤统计,成绩统计分析... ... 

> 11 参考文献

略

> 12 致谢

## 三 答辩PPT编写

主要包含的内容

首页  课题+答辩人+指导教师

第二页  后面的内容

第三页  目的和意义  

第四页  系统的需求

第五页 项目的架构和技术栈

第六页 系统测试及实现效果

第七页 总结和展望

第八页 致谢
